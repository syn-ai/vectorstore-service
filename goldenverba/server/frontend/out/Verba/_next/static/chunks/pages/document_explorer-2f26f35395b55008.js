(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[306],{98404:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/document_explorer",function(){return n(78006)}])},78006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(85893),o=n(67294),s=n(17038),l=n(26246),c=n(29853),r=n(26771),d=n(25414),i=n(89583),m=n(36267);let u=(0,c.getApiHost)();function p(){let[e,t]=(0,o.useState)(""),[n,c]=(0,o.useState)([]),[p,h]=(0,o.useState)("All types"),[x,b]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),[j,y]=(0,o.useState)(!1),[v,N]=(0,o.useState)(""),[w,_]=(0,o.useState)(""),[S,C]=(0,o.useState)("Documentation"),[k,D]=(0,o.useState)("#"),[T,E]=(0,o.useState)([]),[O,A]=(0,o.useState)(!1),[P,F]=(0,o.useState)(null),[I,G]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=async()=>{try{let e=await fetch(u+"/api/get_production",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();!0==t.production?console.log("In Production Mode"):console.log("In Normal Mode"),A(t.production)}catch(e){console.error("Failed to fetch document:",e)}};e()},[]);let H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{let t=e?"".concat(u,"/api/search_documents"):"".concat(u,"/api/get_all_documents"),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,doc_type:"All types"==p?"":p})}),a=await n.json();E(a.documents),G(a.current_embedder),a.doc_types&&c(a.doc_types)}catch(e){console.error("Failed to fetch documents: ".concat(e))}};(0,o.useEffect)(()=>{H()},[]),(0,o.useEffect)(()=>{let e=async()=>{if(P&&P._additional.id)try{let e=await fetch(u+"/api/get_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:P._additional.id})}),t=await e.json();N(t.document.properties.doc_name),_(t.document.properties.text),C(t.document.properties.doc_type),D(t.document.properties.doc_link)}catch(e){console.error("Failed to fetch document:",e)}};e()},[P]);let J=async()=>{try{y(!0);let e=await fetch("".concat(u,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:null==P?void 0:P._additional.id})}),t=await e.json();console.log(t),g(!1),y(!1),F(null),N(""),_(""),H()}catch(e){console.error("Failed to delete document: ".concat(e))}},Z=async e=>{e.preventDefault();let t=e.currentTarget,n=new FormData(t),a=n.get("searchInput");H(a)};return(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-10 text-slate-900",children:[x&&(0,a.jsx)(r.Z,{onClose:()=>b(!1),apiHost:u}),(0,a.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[" ",(0,a.jsx)("div",{className:"flex-none",children:(0,a.jsx)("div",{className:"bg-yellow-200 border-2 border-slate-800 rounded-lg shadow-lg animate-pop-in hover-container mr-4 ",children:(0,a.jsx)("img",{src:"".concat("static/","verba.png"),alt:"Verba Logo",className:" w-24 h-24 shadow-lg"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:" text-6xl font-bold",children:"Verba"}),(0,a.jsxs)("div",{className:"flex text-lg",children:[(0,a.jsx)("span",{className:"bg-opacity-0 rounded px-2 py-1 hover-container animate-pop-in",children:"The"}),(0,a.jsx)("span",{className:"bg-opacity-0 rounded font-bold px-2 py-1 hover-container animate-pop-in-late",children:"Golden"}),(0,a.jsx)("span",{className:"bg-yellow-200 rounded px-2 py-1 hover-container animate-pop-more-late",children:"RAGtriever"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mx-auto p-4 ml-10",children:[(0,a.jsxs)("button",{className:"flex items-center animate-pop-in space-x-2 mr-8 bg-slate-200 text-black p-3  rounded-lg  hover:bg-green-400 border-2 border-black hover:border-amber-50 hover-container shadow-md",onClick:()=>b(!0),children:[(0,a.jsx)(i.wEH,{}),(0,a.jsx)("span",{children:"Add Documents"})]}),(0,a.jsx)(d.Z,{component:"embedders",apiHost:u,onGeneratorSelect:e=>{console.log("Set Streamable")},production:O})]})]})}),(0,a.jsxs)("div",{className:"flex w-full space-x-4 mt-28",children:[(0,a.jsxs)("div",{className:"flex-1 bg-amber-50 border-2 overflow-y-auto border-black bg-opacity-20 rounded-lg shadow-md backdrop-filter min-h-[50vh] backdrop-blur-md p-4 w-1/3 animate-pop-in",children:[(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[" ",(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:"\uD83D\uDCDA Documents"}),P&&(0,a.jsxs)("button",{className:"text-xs bg-slate-400 text-amber-50 hover:bg-orange-400 hover-container px-3 py-2 rounded-lg truncate",onClick:()=>g(!0),children:["❌ Delete ",P.doc_name]})]}),(0,a.jsxs)("p",{className:"text-xs font-bold mb-4 text-slate-600",children:["Search through all your ",T.length," imported documents embedded by ",I]}),(0,a.jsxs)("div",{className:"rounded-lg flex justify- between items-center",children:[(0,a.jsx)("form",{className:"rounded-b-xl p-2 w-full",onSubmit:Z,children:(0,a.jsx)("input",{type:"text",name:"searchInput",placeholder:"Search for documents",className:"w-full p-2 rounded-md bg-amber-50 text-slate-900 placeholder-slate-400"})}),(0,a.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"mr-2 bg-amber-50 text-slate-900 p-2 rounded-md",children:[(0,a.jsx)("option",{value:"All types",children:"All types"}),n.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsx)("hr",{})]}),T.length>0&&(0,a.jsx)(l.OO,{style:{width:"100%",height:"66%"},totalCount:T.length,itemContent:e=>(0,a.jsx)(m.Z,{main:T[e].doc_name,clipboard:!0,sub:T[e].doc_type,subBgColor:"yellow",mainBgColor:"green",isActive:(null==P?void 0:P.doc_name)==T[e].doc_name,onClick:()=>F(T[e]),title:T[e].doc_name},T[e].doc_name)})]}),(0,a.jsx)("div",{className:"w-2/3 space-y-4",children:(0,a.jsx)(s.I,{title:v,text:w,extract:"",docLink:k,type:S})})]})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-amber-50 p-6 rounded-lg shadow-lg border-2 border-black animate-pop-in",children:[(0,a.jsx)("h3",{className:"font-bold mb-4",children:"⚠️ Warning"}),(0,a.jsxs)("p",{children:["Do you want to remove ",null==P?void 0:P.doc_name]}),(0,a.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,a.jsx)("button",{onClick:()=>g(!1),className:"mr-2 px-4 py-2 bg-slate-300 hover:bg-slate-200 rounded",children:"No"}),(0,a.jsxs)("button",{onClick:J,className:"px-4 py-2 bg-orange-500 hover:bg-orange-400 text-amber-50 rounded",children:[j?"Deleting...":"Yes"," "]})]})]})})]})}}},function(e){e.O(0,[246,774,888,179],function(){return e(e.s=98404)}),_N_E=e.O()}]);